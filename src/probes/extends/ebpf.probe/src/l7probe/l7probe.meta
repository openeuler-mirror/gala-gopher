version = "1.0.0"
measurements:
(
    {
        table_name: "l7_link",
        entity_name: "l7",
        fields:
        (
            {
                description: "Process ID of l7 session.",
                type: "key",
                name: "tgid",
            },
            {
                description: "Client IP address of l7 session.",
                type: "key",
                name: "client_ip",
            },
            {
                description: "Server IP address of l7 session.",
                type: "key",
                name: "server_ip",
            },
            {
                description: "Server Port of l7 session.",
                type: "key",
                name: "server_port",
            },
            {
                description: "Role of l4 protocol(TCP Client/Server or UDP).",
                type: "key",
                name: "l4_role",
            },
            {
                description: "Role of l7 protocol(Client or Server).",
                type: "key",
                name: "l7_role",
            },
            {
                description: "Name of l7 protocol(http/http2/mysql...).",
                type: "key",
                name: "protocol",
            },
            {
                description: "Indicates whether an SSL-encrypted l7 session is used.",
                type: "label",
                name: "ssl",
            },
            {
                description: "Number of bytes sent by a l7 session.",
                type: "gauge",
                name: "bytes_sent",
            },
            {
                description: "Number of bytes recv by a l7 session.",
                type: "gauge",
                name: "bytes_recv",
            },
            {
                description: "Number of segs sent by a l7 session.",
                type: "gauge",
                name: "segs_sent",
            },
            {
                description: "Number of segs recv by a l7 session.",
                type: "gauge",
                name: "segs_recv",
            }
        )
    },
    {
        table_name: "l7_rpc",
        entity_name: "l7",
        fields:
        (
            {
                description: "Process ID of l7 session.",
                type: "key",
                name: "tgid",
            },
            {
                description: "Client IP address of l7 session.",
                type: "key",
                name: "client_ip",
            },
            {
                description: "Server IP address of l7 session.",
                type: "key",
                name: "server_ip",
            },
            {
                description: "Server Port of l7 session.",
                type: "key",
                name: "server_port",
            },
            {
                description: "Role of l4 protocol(TCP Client/Server or UDP).",
                type: "key",
                name: "l4_role",
            },
            {
                description: "Role of l7 protocol(Client or Server).",
                type: "key",
                name: "l7_role",
            },
            {
                description: "Name of l7 protocol(http/http2/mysql...).",
                type: "key",
                name: "protocol",
            },
            {
                description: "Indicates whether an SSL-encrypted l7 session is used.",
                type: "label",
                name: "ssl",
            },
            {
                description: "Request throughput of l7 session.",
                type: "gauge",
                name: "throughput_req",
            },
            {
                description: "Response throughput of l7 session.",
                type: "gauge",
                name: "throughput_resp",
            },
            {
                description: "Request num of l7 session.",
                type: "gauge",
                name: "req_count",
            },
            {
                description: "Response num of l7 session.",
                type: "gauge",
                name: "resp_count",
            },
            {
                description: "L7 session average latency.",
                type: "gauge",
                name: "latency_avg",
            },
            {
                description: "L7 session histogram latency.",
                type: "histogram",
                name: "latency",
            },
            {
                description: "L7 session sum latency.",
                type: "gauge",
                name: "latency_sum",
            },
            {
                description: "L7 session error rate.",
                type: "gauge",
                name: "err_ratio",
            },
            {
                description: "L7 session error count.",
                type: "gauge",
                name: "err_count",
            }
        )
    },
    {
        table_name: "l7_rpc_api",
        entity_name: "l7_api",
        fields:
        (
            {
                description: "Process ID of l7 session.",
                type: "key",
                name: "tgid",
            },
            {
                description: "Client IP address of l7 session.",
                type: "key",
                name: "client_ip",
            },
            {
                description: "Server IP address of l7 session.",
                type: "key",
                name: "server_ip",
            },
            {
                description: "Server Port of l7 session.",
                type: "key",
                name: "server_port",
            },
            {
                description: "Role of l4 protocol(TCP Client/Server or UDP).",
                type: "key",
                name: "l4_role",
            },
            {
                description: "Role of l7 protocol(Client or Server).",
                type: "key",
                name: "l7_role",
            },
            {
                description: "Name of l7 protocol(http/http2/mysql...).",
                type: "key",
                name: "protocol",
            },
            {
                description: "API level metrics label.",
                type: "key",
                name: "api",
            },
            {
                description: "Indicates whether an SSL-encrypted l7 session is used.",
                type: "label",
                name: "ssl",
            },
            {
                description: "Request throughput of l7 session.",
                type: "gauge",
                name: "throughput_req",
            },
            {
                description: "Response throughput of l7 session.",
                type: "gauge",
                name: "throughput_resp",
            },
            {
                description: "Request num of l7 session.",
                type: "gauge",
                name: "req_count",
            },
            {
                description: "Response num of l7 session.",
                type: "gauge",
                name: "resp_count",
            },
            {
                description: "L7 session average latency.",
                type: "gauge",
                name: "latency_avg",
            },
            {
                description: "L7 session histogram latency.",
                type: "histogram",
                name: "latency",
            },
            {
                description: "L7 session sum latency.",
                type: "gauge",
                name: "latency_sum",
            },
            {
                description: "L7 session error rate.",
                type: "gauge",
                name: "err_ratio",
            },
            {
                description: "L7 session client error rate.",
                type: "gauge",
                name: "client_err_ratio",
            },
            {
                description: "L7 session server error rate.",
                type: "gauge",
                name: "server_err_ratio",
            },
            {
                description: "L7 session error count.",
                type: "gauge",
                name: "err_count",
            },
            {
                description: "L7 session client error count.",
                type: "gauge",
                name: "client_err_count",
            },
            {
                description: "L7 session server error count.",
                type: "gauge",
                name: "server_err_count",
            }
        )
    }
)

version = "1.0.0"
measurements:
(
    {
        table_name: "tcp_tx_rx",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "rx bytes",
                type: "gauge",
                name: "rx_bytes",
            },
            {
                description: "tx bytes",
                type: "gauge",
                name: "tx_bytes",
            },
            {
                description: "total number of segments rcvd",
                type: "gauge",
                name: "segs_in",
            },
            {
                description: "total number of segments sent",
                type: "gauge",
                name: "segs_out",
            }
        )
    },
    {
        table_name: "tcp_rtt",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "Smoothed Round Trip Time(us).",
                type: "gauge",
                name: "srtt_p50",
            },
            {
                description: "Smoothed Round Trip Time(us).",
                type: "gauge",
                name: "srtt_p90",
            },
            {
                description: "Smoothed Round Trip Time(us).",
                type: "gauge",
                name: "srtt_p99",
            },
            {
                description: "Receive end RTT (unidirectional measurement).",
                type: "gauge",
                name: "rcv_rtt_p50",
            },
            {
                description: "Receive end RTT (unidirectional measurement).",
                type: "gauge",
                name: "rcv_rtt_p90",
            },
            {
                description: "Receive end RTT (unidirectional measurement).",
                type: "gauge",
                name: "rcv_rtt_p99",
            }
        )
    },
    {
        table_name: "tcp_windows",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "Congestion Control Window Size.",
                type: "gauge",
                name: "snd_cwnd_p50",
            },
            {
                description: "Congestion Control Window Size.",
                type: "gauge",
                name: "snd_cwnd_p90",
            },
            {
                description: "Congestion Control Window Size.",
                type: "gauge",
                name: "snd_cwnd_p99",
            },
            {
                description: "Number of bytes not sent currently.",
                type: "gauge",
                name: "notsent_bytes_p50",
            },
            {
                description: "Number of bytes not sent currently.",
                type: "gauge",
                name: "notsent_bytes_p90",
            },
            {
                description: "Number of bytes not sent currently.",
                type: "gauge",
                name: "notsent_bytes_p99",
            },
            {
                description: "Number of bytes not ack currently.",
                type: "gauge",
                name: "notack_bytes_p50",
            },
            {
                description: "Number of bytes not ack currently.",
                type: "gauge",
                name: "notack_bytes_p90",
            },
            {
                description: "Number of bytes not ack currently.",
                type: "gauge",
                name: "notack_bytes_p99",
            },
            {
                description: "Segments to be reordered.",
                type: "gauge",
                name: "reordering_p50",
            },
            {
                description: "Segments to be reordered.",
                type: "gauge",
                name: "reordering_p90",
            },
            {
                description: "Segments to be reordered.",
                type: "gauge",
                name: "reordering_p99",
            },
            {
                description: "Size of TCP send window.",
                type: "gauge",
                name: "snd_wnd_p50",
            },
            {
                description: "Size of TCP send window.",
                type: "gauge",
                name: "snd_wnd_p90",
            },
            {
                description: "Size of TCP send window.",
                type: "gauge",
                name: "snd_wnd_p99",
            },
            {
                description: "Size of TCP receive window.",
                type: "gauge",
                name: "rcv_wnd_p50",
            },
            {
                description: "Size of TCP receive window.",
                type: "gauge",
                name: "rcv_wnd_p90",
            },
            {
                description: "Size of TCP receive window.",
                type: "gauge",
                name: "rcv_wnd_p99",
            },
            {
                description: "TCP available send window.",
                type: "gauge",
                name: "avl_snd_wnd_p50",
            },
            {
                description: "TCP available send window.",
                type: "gauge",
                name: "avl_snd_wnd_p90",
            },
            {
                description: "TCP available send window.",
                type: "gauge",
                name: "avl_snd_wnd_p99",
            },
            {
                description: "TCP zero receive windows ratio",
                type: "gauge",
                name: "zero_win_rx_ratio",
            },
            {
                description: "TCP zero send windows ratio",
                type: "gauge",
                name: "zero_win_tx_ratio",
            }
        )
    },
    {
        table_name: "tcp_rate",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "Retransmission timeOut(us)",
                type: "gauge",
                name: "rto_p50",
            },
            {
                description: "Retransmission timeOut(us)",
                type: "gauge",
                name: "rto_p90",
            },
            {
                description: "Retransmission timeOut(us)",
                type: "gauge",
                name: "rto_p99",
            },
            {
                description: "Estimated value of delayed ACK(us)",
                type: "gauge",
                name: "ato_p50",
            },
            {
                description: "Estimated value of delayed ACK(us)",
                type: "gauge",
                name: "ato_p90",
            },
            {
                description: "Estimated value of delayed ACK(us)",
                type: "gauge",
                name: "ato_p99",
            }
        )
    },
    {
        table_name: "tcp_srtt",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "RTT of syn packet(us).",
                type: "gauge",
                name: "syn_srtt_p50",
            },
            {
                description: "RTT of syn packet(us).",
                type: "gauge",
                name: "syn_srtt_p90",
            },
            {
                description: "RTT of syn packet(us).",
                type: "gauge",
                name: "syn_srtt_p99",
            },
            {
                description: "RTT of syn packet(us).",
                type: "gauge",
                name: "syn_srtt",
            }
        )
    },
    {
        table_name: "tcp_sockbuf",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "Byte length of the RX buffer.",
                type: "gauge",
                name: "sk_rcvbuf_p50",
            },
            {
                description: "Byte length of the RX buffer.",
                type: "gauge",
                name: "sk_rcvbuf_p90",
            },
            {
                description: "Byte length of the RX buffer.",
                type: "gauge",
                name: "sk_rcvbuf_p99",
            },
            {
                description: "Byte length of the TX buffer.",
                type: "gauge",
                name: "sk_sndbuf_p50",
            },
            {
                description: "Byte length of the TX buffer.",
                type: "gauge",
                name: "sk_sndbuf_p90",
            },
            {
                description: "Byte length of the TX buffer.",
                type: "gauge",
                name: "sk_sndbuf_p99",
            }
        )
    },
    {
        table_name: "tcp_abn",
        entity_name: "tcp_link",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "client ip",
                type: "key",
                name: "client_ip",
            },
            {
                description: "server ip",
                type: "key",
                name: "server_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "protocol",
                type: "key",
                name: "protocol",
            },
            {
                description: "retrans packets",
                type: "gauge",
                name: "retran_packets",
            },
            {
                description: "drops caused by backlog queue full",
                type: "gauge",
                name: "backlog_drops",
            },
            {
                description: "sock drop counter",
                type: "gauge",
                name: "sk_drops",
            },
            {
                description: "tcp lost counter",
                type: "gauge",
                name: "lost_out",
            },
            {
                description: "tcp sacked out counter",
                type: "gauge",
                name: "sacked_out",
            },
            {
                description: "drops caused by socket filter",
                type: "gauge",
                name: "filter_drops",
            },
            {
                description: "counter of tcp link timeout",
                type: "gauge",
                name: "tmout_count",
            },
            {
                description: "counter of limits when allocate wmem",
                type: "gauge",
                name: "snd_buf_limit_count",
            },
            {
                description: "rmem is not enough",
                type: "gauge",
                name: "rmem_scheduls",
            },
            {
                description: "tcp out of memory",
                type: "gauge",
                name: "tcp_oom",
            },
            {
                description: "send_rsts",
                type: "gauge",
                name: "send_rsts",
            },
            {
                description: "receive_rsts",
                type: "gauge",
                name: "receive_rsts",
            },
            {
                description: "retrans ratio",
                type: "gauge",
                name: "retrans_ratio",
            }
        )
    },
    {
        table_name: "proc_flow_perf",
        entity_name: "proc_flow_perf",
        fields:
        (
            {
                description: "id of process",
                type: "key",
                name: "tgid",
            },
            {
                description: "role",
                type: "key",
                name: "role",
            },
            {
                description: "remote ip",
                type: "key",
                name: "remote_ip",
            },
            {
                description: "server port",
                type: "key",
                name: "server_port",
            },
            {
                description: "request receive delay(ms) before read by application and after arrive netcard",
                type: "histogram",
                name: "rx_delay",
            },
            {
                description: "response send delay(ms) before receive ack and after write by application",
                type: "histogram",
                name: "tx_delay",
            }
        )
    }
)

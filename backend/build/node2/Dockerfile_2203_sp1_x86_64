#
# Dockerfile for building backend docker image for openEuler 22.03 lts sp1.
#
# Usage:
# docker build -f Dockerfile_2203_sp1_x86_64 -t backend:1.0.2 .
#

# base image
FROM hub.oepkgs.net/openeuler/openeuler_x86_64:22.03-lts-sp1

MAINTAINER BACKEND

# work directory int container
WORKDIR /backend

# copy current directory files to container work directory
ADD . /backend

# copy current directory files to container work directory
COPY ./entrypoint.sh /
COPY ./backend.json  /

RUN chmod +x /entrypoint.sh

# install dependecies
RUN sed -i 's/repo.openeuler.org/mirrors.tools.huawei.com\/openeuler/g' /etc/yum.repos.d/openEuler.repo\
	&& yum -y install bash\
	&& yum -y install python

# start backend
ENTRYPOINT [ "/entrypoint.sh" ]

CMD [ "python","./backend.py" ]
